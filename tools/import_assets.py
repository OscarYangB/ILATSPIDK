import os

header_text = ""

header_text += "// This is an autogenerated file. Do not edit!\n\n"
header_text += "#pragma once\n\n"

header_text += "static_assert(true); // There's a clang bug that gives a warning unless this fucking thing is here\n\n"
header_text += "#pragma clang diagnostic push\n"
header_text += "#pragma clang diagnostic ignored \"-Wc23-extensions\"\n\n"

for (root, dirs, files) in os.walk("..\\assets"):
    for file in files:
        split = file.split('.', 1)
        name = split[0] # remove file extension
        full_path = os.path.join(root, file);
        header_text += "constexpr inline char %s[] { \n\t#embed \"%s\"\n};\n\n"%(name, full_path)

header_text += "#pragma clang diagnostic pop\n"

with open("../src/game_assets.h", "w") as header:
    header.write(header_text)
